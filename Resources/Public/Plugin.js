(()=>{var ir=Object.create;var Pt=Object.defineProperty;var ar=Object.getOwnPropertyDescriptor;var sr=Object.getOwnPropertyNames;var lr=Object.getPrototypeOf,cr=Object.prototype.hasOwnProperty;var ur=(e,n)=>()=>(e&&(n=e(e=0)),n);var oe=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var dr=(e,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of sr(n))!cr.call(e,i)&&i!==r&&Pt(e,i,{get:()=>n[i],enumerable:!(o=ar(n,i))||o.enumerable});return e};var j=(e,n,r)=>(r=e!=null?ir(lr(e)):{},dr(n||!e||!e.__esModule?Pt(r,"default",{value:e,enumerable:!0}):r,e));function Y(e){return(...n)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${e}`])return window["@Neos:HostPluginAPI"][`@${e}`](...n);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var _=ur(()=>{});var ie=oe((No,Mt)=>{_();Mt.exports=Y("vendor")().React});var jt=oe((ko,Lt)=>{_();Lt.exports=Y("vendor")().reactRedux});var Ne=oe((Bo,Yt)=>{_();Yt.exports=Y("vendor")().PropTypes});var Zt=oe((jo,Ut)=>{_();Ut.exports=Y("NeosProjectPackages")().NeosUiReduxStore});var ze=oe((Ho,Jt)=>{_();Jt.exports=Y("NeosProjectPackages")().NeosUiDecorators});var ht=oe((Vo,Kt)=>{_();Kt.exports=Y("NeosProjectPackages")().ReactUiComponents});var ln=oe((Wi,sn)=>{_();sn.exports=Y("vendor")().ReactDOM});var un=oe((ki,cn)=>{"use strict";var yr=function(e,n,r,o,i,l,c,t){if(!e){var u;if(n===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=[r,o,i,l,c,t],s=0;u=new Error(n.replace(/%s/g,function(){return a[s++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};cn.exports=yr});_();var fr=(e,n="position",r="key")=>{let o=typeof n=="string"?m=>m[n]:n,i={},l={},c={},t={},u={},a={};e.forEach((m,S)=>{let w=m[r]?m[r]:String(S);i[w]=S;let I=o(m),A=String(I||S),L=!1;if(A.startsWith("start")){let p=A.match(/start\s+(\d+)/),E=p&&p[1]?Number(p[1]):0;c[E]||(c[E]=[]),c[E].push(w)}else if(A.startsWith("end")){let p=A.match(/end\s+(\d+)/),E=p&&p[1]?Number(p[1]):0;t[E]||(t[E]=[]),t[E].push(w)}else if(A.startsWith("before")){let p=A.match(/before\s+(\S+)(\s+(\d+))?/);if(!p)L=!0;else{let E=p[1],C=p[3]?Number(p[3]):0;u[E]||(u[E]={}),u[E][C]||(u[E][C]=[]),u[E][C].push(w)}}else if(A.startsWith("after")){let p=A.match(/after\s+(\S+)(\s+(\d+))?/);if(!p)L=!0;else{let E=p[1],C=p[3]?Number(p[3]):0;a[E]||(a[E]={}),a[E][C]||(a[E][C]=[]),a[E][C].push(w)}}else L=!0;if(L){let p=parseFloat(A);(isNaN(p)||!isFinite(p))&&(p=S),l[p]||(l[p]=[]),l[p].push(w)}});let s=[],d=[],f=[],h=[],v=(m,S)=>{let w=Object.keys(m).map(I=>Number(I)).sort((I,A)=>I-A);return S?w:w.reverse()},b=(m,S)=>{m.forEach(w=>{if(!(h.indexOf(w)>=0)){if(h.push(w),u[w]){let I=v(u[w],!0);for(let A of I)b(u[w][A],S)}if(S.push(w),a[w]){let I=v(a[w],!1);for(let A of I)b(a[w][A],S)}}})};for(let m of v(c,!1))b(c[m],s);for(let m of v(l,!0))b(l[m],d);for(let m of v(t,!0))b(t[m],f);for(let m of Object.keys(u))if(!(h.indexOf(m)>=0))for(let S of v(u[m],!1))b(u[m][S],s);for(let m of Object.keys(a))if(!(h.indexOf(m)>=0))for(let S of v(a[m],!1))b(a[m][S],d);return[...s,...d,...f].map(m=>i[m]).map(m=>e[m])},pt=fr;var Xt=Y("manifest");var G=j(ie()),Un=j(jt()),T=j(Ne());var Ht="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Ft=(e=21)=>{let n="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)n+=Ht[r[e]&63];return n};function Vt(e){var n,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(n=0;n<i;n++)e[n]&&(r=Vt(e[n]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function hr(){for(var e,n,r=0,o="",i=arguments.length;r<i;r++)(e=arguments[r])&&(n=Vt(e))&&(o&&(o+=" "),o+=n);return o}var zt=hr;var Le=j(Zt()),Zn=j(ze()),ne=j(ht());_();var _t=Y("NeosProjectPackages")().NeosUiBackendConnectorDefault,{fetchWithErrorHandling:Uo}=Y("NeosProjectPackages")().NeosUiBackendConnector;var ae=j(ie());var q=j(ie());function Qt({style:e,className:n,size:r=30}){return q.default.createElement("svg",{width:r,height:r,stroke:"currentColor",viewBox:"0 0 24 24",style:e,className:n},q.default.createElement("g",null,q.default.createElement("circle",{cx:"12",cy:"12",r:"9.5",fill:"none","stroke-width":"2","stroke-linecap":"round"},[{attribute:"dasharray",values:"0 150;42 150;42 150;42 150"},{attribute:"dashoffset",values:"0;-16;-59;-59"}].map(({attribute:o,values:i})=>q.default.createElement("animate",{key:o,attributeName:`stroke-${o}`,values:i,dur:"1.5s",calcMode:"spline",keyTimes:"0;0.475;0.95;1",keySplines:"0.42,0,0.58,1;0.42,0,0.58,1;0.42,0,0.58,1",repeatCount:"indefinite"}))),q.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"2s",values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}function $t({style:e,className:n,size:r=30}){return q.default.createElement("svg",{width:r*2,height:r,viewBox:"0 0 24 12",class:n,style:e},[1,2,3].map(o=>{let i=o*6,l=Math.round(100/3*(o-1))/100;return q.default.createElement("circle",{cx:i,cy:"6",r:"0",fill:"currentColor"},q.default.createElement("animate",{attributeName:"r",begin:l,calcMode:"spline",dur:"1.5s",keySplines:"0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8",repeatCount:"indefinite",values:"0;2;0;0"}))}))}var qt=j(ze()),gt={container:(e=1)=>({display:"grid",gridTemplate:"'content' 1fr / 1fr",alignItems:"center",justifyItems:"center",width:"100%",minHeight:`calc(var(--spacing-GoldenUnit) * ${e})`}),item:(e=!1)=>({gridArea:"content",transition:"opacity var(--transition-Default), transform var(--transition-Default) ease",opacity:e?1:0,transform:`scale(${e?1:0})`})};function gr({id:e,title:n="Neos.Neos:Main:loading",isLoading:r=!1,delayTime:o=500,timeoutTime:i=5e3,i18nRegistry:l,heightMultiplier:c=1,width:t=60}){let[u,a]=(0,ae.useState)(0),s=n?l.translate(n):null;return(0,ae.useEffect)(()=>{if(!r){a(0);return}let d=setTimeout(()=>{a(1)},o),f=setTimeout(()=>{a(2)},o+i);return()=>{clearTimeout(d),clearTimeout(f)}},[r]),r?ae.default.createElement("div",{id:e,style:gt.container(c),title:s},ae.default.createElement(Qt,{size:t/2,style:gt.item(u==1)}),ae.default.createElement($t,{size:t/2,style:gt.item(u==2)})):null}var mr=(0,qt.neos)(e=>({i18nRegistry:e.get("i18n")})),en=mr(gr);var K=j(ie());function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ve.apply(null,arguments)}function tn(e){if(Array.isArray(e))return e}function nn(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,i,l,c,t=[],u=!0,a=!1;try{if(l=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(o=l.call(r)).done)&&(t.push(o.value),t.length!==n);u=!0);}catch(s){a=!0,i=s}finally{try{if(!u&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(a)throw i}}return t}}function We(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=Array(n);r<n;r++)o[r]=e[r];return o}function Ue(e,n){if(e){if(typeof e=="string")return We(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,n):void 0}}function rn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mt(e,n){return tn(e)||nn(e,n)||Ue(e,n)||rn()}function ee(e){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ee(e)}function on(e,n){if(ee(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,n||"default");if(ee(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Ze(e){var n=on(e,"string");return ee(n)=="symbol"?n:n+""}function W(e,n,r){return(n=Ze(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Je(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&o.push.apply(o,Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),o.forEach(function(i){W(e,i,r[i])})}return e}function xe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function an(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ze(o.key),o)}}function we(e,n,r){return n&&an(e.prototype,n),r&&an(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function O(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,n){if(n&&(ee(n)=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ie(e)}function _e(e,n){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_e(e,n)}function Qe(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_e(e,n)}var V=j(ie()),tt=j(ln()),se=j(un());function dn(e){if(Array.isArray(e))return We(e)}function fn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hn(e){return dn(e)||fn(e)||Ue(e)||pn()}var x=j(Ne()),br=function(){function e(){xe(this,e),W(this,"refs",{})}return we(e,[{key:"add",value:function(r,o){this.refs[r]||(this.refs[r]=[]),this.refs[r].push(o)}},{key:"remove",value:function(r,o){var i=this.getIndex(r,o);i!==-1&&this.refs[r].splice(i,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var r=this;return this.refs[this.active.collection].find(function(o){var i=o.node;return i.sortableInfo.index==r.active.index})}},{key:"getIndex",value:function(r,o){return this.refs[r].indexOf(o)}},{key:"getOrderedRefs",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[r].sort(vr)}}]),e}();function vr(e,n){var r=e.node.sortableInfo.index,o=n.node.sortableInfo.index;return r-o}function bn(e,n){return Object.keys(e).reduce(function(r,o){return n.indexOf(o)===-1&&(r[o]=e[o]),r},{})}var Ce={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},vn=function(){if(typeof window>"u"||typeof document>"u")return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],n=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1];switch(n){case"ms":return"ms";default:return n&&n.length?n[0].toUpperCase()+n.substr(1):""}}();function $e(e,n){Object.keys(n).forEach(function(r){e.style[r]=n[r]})}function qe(e,n){e.style["".concat(vn,"Transform")]=n==null?"":"translate3d(".concat(n.x,"px,").concat(n.y,"px,0)")}function yt(e,n){e.style["".concat(vn,"TransitionDuration")]=n==null?"":"".concat(n,"ms")}function Re(e,n){for(;e;){if(n(e))return e;e=e.parentNode}return null}function gn(e,n,r){return Math.max(e,Math.min(r,n))}function Ae(e){return e.substr(-2)==="px"?parseFloat(e):0}function xr(e){var n=window.getComputedStyle(e);return{bottom:Ae(n.marginBottom),left:Ae(n.marginLeft),right:Ae(n.marginRight),top:Ae(n.marginTop)}}function vt(e,n){var r=n.displayName||n.name;return r?"".concat(e,"(").concat(r,")"):e}function bt(e,n){var r=e.getBoundingClientRect();return{top:r.top+n.top,left:r.left+n.left}}function ke(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function wr(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function et(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(e){var o={left:r.left+e.offsetLeft,top:r.top+e.offsetTop};return e.parentNode===n?o:et(e.parentNode,n,o)}}function Ir(e,n,r){return e<r&&e>n?e-1:e>r&&e<n?e+1:e}function mn(e){var n=e.lockOffset,r=e.width,o=e.height,i=n,l=n,c="px";if(typeof n=="string"){var t=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(n);(0,se.default)(t!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',n),i=parseFloat(n),l=parseFloat(n),c=t[1]}return(0,se.default)(isFinite(i)&&isFinite(l),"lockOffset value should be a finite. Given %s",n),c==="%"&&(i=i*r/100,l=l*o/100),{x:i,y:l}}function Cr(e){var n=e.height,r=e.width,o=e.lockOffset,i=Array.isArray(o)?o:[o,o];(0,se.default)(i.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var l=mt(i,2),c=l[0],t=l[1];return[mn({height:n,lockOffset:c,width:r}),mn({height:n,lockOffset:t,width:r})]}function Ar(e){var n=window.getComputedStyle(e),r=/(auto|scroll)/,o=["overflow","overflowX","overflowY"];return o.find(function(i){return r.test(n[i])})}function xn(e){return e instanceof HTMLElement?Ar(e)?e:xn(e.parentNode):null}function Sr(e){var n=window.getComputedStyle(e);return n.display==="grid"?{x:Ae(n.gridColumnGap),y:Ae(n.gridRowGap)}:{x:0,y:0}}var fe={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},pe={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function Or(e){var n="input, textarea, select, canvas, [contenteditable]",r=e.querySelectorAll(n),o=e.cloneNode(!0),i=hn(o.querySelectorAll(n));return i.forEach(function(l,c){if(l.type!=="file"&&(l.value=r[c].value),l.type==="radio"&&l.name&&(l.name="__sortableClone__".concat(l.name)),l.tagName===pe.Canvas&&r[c].width>0&&r[c].height>0){var t=l.getContext("2d");t.drawImage(r[c],0,0)}}),o}function wn(e){var n,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=n=function(i){Qe(l,i);function l(){var c,t;xe(this,l);for(var u=arguments.length,a=new Array(u),s=0;s<u;s++)a[s]=arguments[s];return t=Ke(this,(c=Ie(l)).call.apply(c,[this].concat(a))),W(O(O(t)),"wrappedInstance",(0,V.createRef)()),t}return we(l,[{key:"componentDidMount",value:function(){var t=(0,tt.findDOMNode)(this);t.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return(0,se.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,V.createElement)(e,ve({ref:t},this.props))}}]),l}(V.Component),W(n,"displayName",vt("sortableHandle",e)),r}function yn(e){return e.sortableHandle!=null}var Tr=function(){function e(n,r){xe(this,e),this.container=n,this.onScrollCallback=r}return we(e,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(r){var o=this,i=r.translate,l=r.minTranslate,c=r.maxTranslate,t=r.width,u=r.height,a={x:0,y:0},s={x:1,y:1},d={x:10,y:10},f=this.container,h=f.scrollTop,v=f.scrollLeft,b=f.scrollHeight,R=f.scrollWidth,m=f.clientHeight,S=f.clientWidth,w=h===0,I=b-h-m===0,A=v===0,L=R-v-S===0;i.y>=c.y-u/2&&!I?(a.y=1,s.y=d.y*Math.abs((c.y-u/2-i.y)/u)):i.x>=c.x-t/2&&!L?(a.x=1,s.x=d.x*Math.abs((c.x-t/2-i.x)/t)):i.y<=l.y+u/2&&!w?(a.y=-1,s.y=d.y*Math.abs((i.y-u/2-l.y)/u)):i.x<=l.x+t/2&&!A&&(a.x=-1,s.x=d.x*Math.abs((i.x-t/2-l.x)/t)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(a.x!==0||a.y!==0)&&(this.interval=setInterval(function(){o.isAutoScrolling=!0;var p={left:s.x*a.x,top:s.y*a.y};o.container.scrollTop+=p.top,o.container.scrollLeft+=p.left,o.onScrollCallback(p)},5))}}]),e}();function Gr(e){var n=e.node;return{height:n.offsetHeight,width:n.offsetWidth}}function Er(e){var n=[pe.Input,pe.Textarea,pe.Select,pe.Option,pe.Button];return!!(n.indexOf(e.target.tagName)!==-1||Re(e.target,function(r){return r.contentEditable==="true"}))}var In={axis:x.default.oneOf(["x","y","xy"]),contentWindow:x.default.any,disableAutoscroll:x.default.bool,distance:x.default.number,getContainer:x.default.func,getHelperDimensions:x.default.func,helperClass:x.default.string,helperContainer:x.default.oneOfType([x.default.func,typeof HTMLElement>"u"?x.default.any:x.default.instanceOf(HTMLElement)]),hideSortableGhost:x.default.bool,keyboardSortingTransitionDuration:x.default.number,lockAxis:x.default.string,lockOffset:x.default.oneOfType([x.default.number,x.default.string,x.default.arrayOf(x.default.oneOfType([x.default.number,x.default.string]))]),lockToContainerEdges:x.default.bool,onSortEnd:x.default.func,onSortMove:x.default.func,onSortOver:x.default.func,onSortStart:x.default.func,pressDelay:x.default.number,pressThreshold:x.default.number,keyCodes:x.default.shape({lift:x.default.arrayOf(x.default.number),drop:x.default.arrayOf(x.default.number),cancel:x.default.arrayOf(x.default.number),up:x.default.arrayOf(x.default.number),down:x.default.arrayOf(x.default.number)}),shouldCancelStart:x.default.func,transitionDuration:x.default.number,updateBeforeSortStart:x.default.func,useDragHandle:x.default.bool,useWindowAsScrollContainer:x.default.bool},Cn={lift:[fe.SPACE],drop:[fe.SPACE],cancel:[fe.ESC],up:[fe.UP,fe.LEFT],down:[fe.DOWN,fe.RIGHT]},Nr={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:Gr,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Cn,shouldCancelStart:Er,transitionDuration:300,useWindowAsScrollContainer:!1},Wr=Object.keys(In);function kr(e){(0,se.default)(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function Rr(e,n){try{var r=e()}catch(o){return n(!0,o)}return r&&r.then?r.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}var An=(0,V.createContext)({manager:{}});function Sn(e){var n,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=n=function(i){Qe(l,i);function l(c){var t;xe(this,l),t=Ke(this,Ie(l).call(this,c)),W(O(O(t)),"state",{}),W(O(O(t)),"handleStart",function(a){var s=t.props,d=s.distance,f=s.shouldCancelStart;if(!(a.button===2||f(a))){t.touched=!0,t.position=ke(a);var h=Re(a.target,function(w){return w.sortableInfo!=null});if(h&&h.sortableInfo&&t.nodeIsChild(h)&&!t.state.sorting){var v=t.props.useDragHandle,b=h.sortableInfo,R=b.index,m=b.collection,S=b.disabled;if(S||v&&!Re(a.target,yn))return;t.manager.active={collection:m,index:R},!wr(a)&&a.target.tagName===pe.Anchor&&a.preventDefault(),d||(t.props.pressDelay===0?t.handlePress(a):t.pressTimer=setTimeout(function(){return t.handlePress(a)},t.props.pressDelay))}}}),W(O(O(t)),"nodeIsChild",function(a){return a.sortableInfo.manager===t.manager}),W(O(O(t)),"handleMove",function(a){var s=t.props,d=s.distance,f=s.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var h=ke(a),v={x:t.position.x-h.x,y:t.position.y-h.y},b=Math.abs(v.x)+Math.abs(v.y);t.delta=v,!d&&(!f||b>=f)?(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0)):d&&b>=d&&t.manager.isActive()&&t.handlePress(a)}}),W(O(O(t)),"handleEnd",function(){t.touched=!1,t.cancel()}),W(O(O(t)),"cancel",function(){var a=t.props.distance,s=t.state.sorting;s||(a||clearTimeout(t.pressTimer),t.manager.active=null)}),W(O(O(t)),"handlePress",function(a){try{var s=t.manager.getActive(),d=function(){if(s){var f=function(){var P=A.sortableInfo.index,k=xr(A),Z=Sr(t.container),F=t.scrollContainer.getBoundingClientRect(),ce=b({index:P,node:A,collection:L});if(t.node=A,t.margin=k,t.gridGap=Z,t.width=ce.width,t.height=ce.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=A.getBoundingClientRect(),t.containerBoundingRect=F,t.index=P,t.newIndex=P,t.axis={x:v.indexOf("x")>=0,y:v.indexOf("y")>=0},t.offsetEdge=et(A,t.container),p?t.initialOffset=ke(Je({},a,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top})):t.initialOffset=ke(a),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild(Or(A)),$e(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-k.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-k.top,"px"),width:"".concat(t.width,"px")}),p&&t.helper.focus(),m&&(t.sortableGhost=A,$e(A,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},p){var be=I?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,je=be.top,Ye=be.left,ct=be.width,ut=be.height,dt=je+ut,ft=Ye+ct;t.axis.x&&(t.minTranslate.x=Ye-t.boundingClientRect.left,t.maxTranslate.x=ft-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=je-t.boundingClientRect.top,t.maxTranslate.y=dt-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(I?0:F.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(I?t.contentWindow.innerWidth:F.left+F.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(I?0:F.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(I?t.contentWindow.innerHeight:F.top+F.height)-t.boundingClientRect.top-t.height/2);R&&R.split(" ").forEach(function(ue){return t.helper.classList.add(ue)}),t.listenerNode=a.touches?a.target:t.contentWindow,p?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(Ce.move.forEach(function(ue){return t.listenerNode.addEventListener(ue,t.handleSortMove,!1)}),Ce.end.forEach(function(ue){return t.listenerNode.addEventListener(ue,t.handleSortEnd,!1)})),t.setState({sorting:!0,sortingIndex:P}),w&&w({node:A,index:P,collection:L,isKeySorting:p,nodes:t.manager.getOrderedRefs(),helper:t.helper},a),p&&t.keyMove(0)},h=t.props,v=h.axis,b=h.getHelperDimensions,R=h.helperClass,m=h.hideSortableGhost,S=h.updateBeforeSortStart,w=h.onSortStart,I=h.useWindowAsScrollContainer,A=s.node,L=s.collection,p=t.manager.isKeySorting,E=function(){if(typeof S=="function"){t._awaitingUpdateBeforeSortStart=!0;var C=Rr(function(){var P=A.sortableInfo.index;return Promise.resolve(S({collection:L,index:P,node:A,isKeySorting:p},a)).then(function(){})},function(P,k){if(t._awaitingUpdateBeforeSortStart=!1,P)throw k;return k});if(C&&C.then)return C.then(function(){})}}();return E&&E.then?E.then(f):f(E)}}();return Promise.resolve(d&&d.then?d.then(function(){}):void 0)}catch(f){return Promise.reject(f)}}),W(O(O(t)),"handleSortMove",function(a){var s=t.props.onSortMove;typeof a.preventDefault=="function"&&a.cancelable&&a.preventDefault(),t.updateHelperPosition(a),t.animateNodes(),t.autoscroll(),s&&s(a)}),W(O(O(t)),"handleSortEnd",function(a){var s=t.props,d=s.hideSortableGhost,f=s.onSortEnd,h=t.manager,v=h.active.collection,b=h.isKeySorting,R=t.manager.getOrderedRefs();t.listenerNode&&(b?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(Ce.move.forEach(function(A){return t.listenerNode.removeEventListener(A,t.handleSortMove)}),Ce.end.forEach(function(A){return t.listenerNode.removeEventListener(A,t.handleSortEnd)}))),t.helper.parentNode.removeChild(t.helper),d&&t.sortableGhost&&$e(t.sortableGhost,{opacity:"",visibility:""});for(var m=0,S=R.length;m<S;m++){var w=R[m],I=w.node;w.edgeOffset=null,w.boundingClientRect=null,qe(I,null),yt(I,null),w.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),typeof f=="function"&&f({collection:v,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:b,nodes:R},a),t.touched=!1}),W(O(O(t)),"autoscroll",function(){var a=t.props.disableAutoscroll,s=t.manager.isKeySorting;if(a){t.autoScroller.clear();return}if(s){var d=Je({},t.translate),f=0,h=0;t.axis.x&&(d.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),f=t.translate.x-d.x),t.axis.y&&(d.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),h=t.translate.y-d.y),t.translate=d,qe(t.helper,t.translate),t.scrollContainer.scrollLeft+=f,t.scrollContainer.scrollTop+=h;return}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}),W(O(O(t)),"onAutoScroll",function(a){t.translate.x+=a.left,t.translate.y+=a.top,t.animateNodes()}),W(O(O(t)),"handleKeyDown",function(a){var s=a.keyCode,d=t.props,f=d.shouldCancelStart,h=d.keyCodes,v=h===void 0?{}:h,b=Je({},Cn,v);t.manager.active&&!t.manager.isKeySorting||!t.manager.active&&(!b.lift.includes(s)||f(a)||!t.isValidSortingTarget(a))||(a.stopPropagation(),a.preventDefault(),b.lift.includes(s)&&!t.manager.active?t.keyLift(a):b.drop.includes(s)&&t.manager.active?t.keyDrop(a):b.cancel.includes(s)?(t.newIndex=t.manager.active.index,t.keyDrop(a)):b.up.includes(s)?t.keyMove(-1):b.down.includes(s)&&t.keyMove(1))}),W(O(O(t)),"keyLift",function(a){var s=a.target,d=Re(s,function(b){return b.sortableInfo!=null}),f=d.sortableInfo,h=f.index,v=f.collection;t.initialFocusedNode=s,t.manager.isKeySorting=!0,t.manager.active={index:h,collection:v},t.handlePress(a)}),W(O(O(t)),"keyMove",function(a){var s=t.manager.getOrderedRefs(),d=s[s.length-1].node.sortableInfo.index,f=t.newIndex+a,h=t.newIndex;if(!(f<0||f>d)){t.prevIndex=h,t.newIndex=f;var v=Ir(t.newIndex,t.prevIndex,t.index),b=s.find(function(p){var E=p.node;return E.sortableInfo.index===v}),R=b.node,m=t.containerScrollDelta,S=b.boundingClientRect||bt(R,m),w=b.translate||{x:0,y:0},I={top:S.top+w.y-m.top,left:S.left+w.x-m.left},A=h<f,L={x:A&&t.axis.x?R.offsetWidth-t.width:0,y:A&&t.axis.y?R.offsetHeight-t.height:0};t.handleSortMove({pageX:I.left+L.x,pageY:I.top+L.y,ignoreTransition:a===0})}}),W(O(O(t)),"keyDrop",function(a){t.handleSortEnd(a),t.initialFocusedNode&&t.initialFocusedNode.focus()}),W(O(O(t)),"handleKeyEnd",function(a){t.manager.active&&t.keyDrop(a)}),W(O(O(t)),"isValidSortingTarget",function(a){var s=t.props.useDragHandle,d=a.target,f=Re(d,function(h){return h.sortableInfo!=null});return f&&f.sortableInfo&&!f.sortableInfo.disabled&&(s?yn(d):d.sortableInfo)});var u=new br;return kr(c),t.manager=u,t.wrappedInstance=(0,V.createRef)(),t.sortableContextValue={manager:u},t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return we(l,[{key:"componentDidMount",value:function(){var t=this,u=this.props.useWindowAsScrollContainer,a=this.getContainer();Promise.resolve(a).then(function(s){t.container=s,t.document=t.container.ownerDocument||document;var d=t.props.contentWindow||t.document.defaultView||window;t.contentWindow=typeof d=="function"?d():d,t.scrollContainer=u?t.document.scrollingElement||t.document.documentElement:xn(t.container)||t.container,t.autoScroller=new Tr(t.scrollContainer,t.onAutoScroll),Object.keys(t.events).forEach(function(f){return Ce[f].forEach(function(h){return t.container.addEventListener(h,t.events[f],!1)})}),t.container.addEventListener("keydown",t.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var t=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(u){return Ce[u].forEach(function(a){return t.container.removeEventListener(a,t.events[u])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(t){var u=this.props,a=u.lockAxis,s=u.lockOffset,d=u.lockToContainerEdges,f=u.transitionDuration,h=u.keyboardSortingTransitionDuration,v=h===void 0?f:h,b=this.manager.isKeySorting,R=t.ignoreTransition,m=ke(t),S={x:m.x-this.initialOffset.x,y:m.y-this.initialOffset.y};if(S.y-=window.pageYOffset-this.initialWindowScroll.top,S.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=S,d){var w=Cr({height:this.height,lockOffset:s,width:this.width}),I=mt(w,2),A=I[0],L=I[1],p={x:this.width/2-A.x,y:this.height/2-A.y},E={x:this.width/2-L.x,y:this.height/2-L.y};S.x=gn(this.minTranslate.x+p.x,this.maxTranslate.x-E.x,S.x),S.y=gn(this.minTranslate.y+p.y,this.maxTranslate.y-E.y,S.y)}a==="x"?S.y=0:a==="y"&&(S.x=0),b&&v&&!R&&yt(this.helper,v),qe(this.helper,S)}},{key:"animateNodes",value:function(){var t=this.props,u=t.transitionDuration,a=t.hideSortableGhost,s=t.onSortOver,d=this.containerScrollDelta,f=this.windowScrollDelta,h=this.manager.getOrderedRefs(),v={left:this.offsetEdge.left+this.translate.x+d.left,top:this.offsetEdge.top+this.translate.y+d.top},b=this.manager.isKeySorting,R=this.newIndex;this.newIndex=null;for(var m=0,S=h.length;m<S;m++){var w=h[m].node,I=w.sortableInfo.index,A=w.offsetWidth,L=w.offsetHeight,p={height:this.height>L?L/2:this.height/2,width:this.width>A?A/2:this.width/2},E=b&&I>this.index&&I<=R,C=b&&I<this.index&&I>=R,P={x:0,y:0},k=h[m].edgeOffset;k||(k=et(w,this.container),h[m].edgeOffset=k,b&&(h[m].boundingClientRect=bt(w,d)));var Z=m<h.length-1&&h[m+1],F=m>0&&h[m-1];if(Z&&!Z.edgeOffset&&(Z.edgeOffset=et(Z.node,this.container),b&&(Z.boundingClientRect=bt(Z.node,d))),I===this.index){a&&(this.sortableGhost=w,$e(w,{opacity:0,visibility:"hidden"}));continue}u&&yt(w,u),this.axis.x?this.axis.y?C||I<this.index&&(v.left+f.left-p.width<=k.left&&v.top+f.top<=k.top+p.height||v.top+f.top+p.height<=k.top)?(P.x=this.width+this.marginOffset.x,k.left+P.x>this.containerBoundingRect.width-p.width&&Z&&(P.x=Z.edgeOffset.left-k.left,P.y=Z.edgeOffset.top-k.top),this.newIndex===null&&(this.newIndex=I)):(E||I>this.index&&(v.left+f.left+p.width>=k.left&&v.top+f.top+p.height>=k.top||v.top+f.top+p.height>=k.top+L))&&(P.x=-(this.width+this.marginOffset.x),k.left+P.x<this.containerBoundingRect.left+p.width&&F&&(P.x=F.edgeOffset.left-k.left,P.y=F.edgeOffset.top-k.top),this.newIndex=I):E||I>this.index&&v.left+f.left+p.width>=k.left?(P.x=-(this.width+this.marginOffset.x),this.newIndex=I):(C||I<this.index&&v.left+f.left<=k.left+p.width)&&(P.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=I)):this.axis.y&&(E||I>this.index&&v.top+f.top+p.height>=k.top?(P.y=-(this.height+this.marginOffset.y),this.newIndex=I):(C||I<this.index&&v.top+f.top<=k.top+p.height)&&(P.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=I))),qe(w,P),h[m].translate=P}this.newIndex==null&&(this.newIndex=this.index),b&&(this.newIndex=R);var ce=b?this.prevIndex:R;s&&this.newIndex!==ce&&s({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:ce,isKeySorting:b,nodes:h,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return(0,se.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var t=this.props.getContainer;return typeof t!="function"?(0,tt.findDOMNode)(this):t(o.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,V.createElement)(An.Provider,{value:this.sortableContextValue},(0,V.createElement)(e,ve({ref:t},bn(this.props,Wr))))}},{key:"helperContainer",get:function(){var t=this.props.helperContainer;return typeof t=="function"?t():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var t=this.props.useWindowAsScrollContainer;return t?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),l}(V.Component),W(n,"displayName",vt("sortableList",e)),W(n,"defaultProps",Nr),W(n,"propTypes",In),r}var On={index:x.default.number.isRequired,collection:x.default.oneOfType([x.default.number,x.default.string]),disabled:x.default.bool},Br=Object.keys(On);function Tn(e){var n,r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return r=n=function(i){Qe(l,i);function l(){var c,t;xe(this,l);for(var u=arguments.length,a=new Array(u),s=0;s<u;s++)a[s]=arguments[s];return t=Ke(this,(c=Ie(l)).call.apply(c,[this].concat(a))),W(O(O(t)),"wrappedInstance",(0,V.createRef)()),t}return we(l,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(t){this.node&&(t.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),t.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),t.collection!==this.props.collection&&(this.unregister(t.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var t=this.props,u=t.collection,a=t.disabled,s=t.index,d=(0,tt.findDOMNode)(this);d.sortableInfo={collection:u,disabled:a,index:s,manager:this.context.manager},this.node=d,this.ref={node:d},this.context.manager.add(u,this.ref)}},{key:"unregister",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(t,this.ref)}},{key:"getWrappedInstance",value:function(){return(0,se.default)(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=o.withRef?this.wrappedInstance:null;return(0,V.createElement)(e,ve({ref:t},bn(this.props,Br)))}}]),l}(V.Component),W(n,"displayName",vt("sortableElement",e)),W(n,"contextType",An),W(n,"propTypes",On),W(n,"defaultProps",{collection:0}),r}var me=j(ie(),1);var Nn=new Set,z=new WeakMap,Oe=new WeakMap,he=new WeakMap,wt=new WeakMap,Pr=new WeakMap,Te=new WeakMap,nt=new WeakMap,Be=new WeakSet,le,Ct=0,At=0,te="__aa_tgt",Pe="__aa_del",rt="__aa_new",Dr=e=>{let n=Hr(e);n&&n.forEach(r=>Fr(r))},Xr=e=>{e.forEach(n=>{n.target===le&&Lr(),z.has(n.target)&&ge(n.target)})};function Mr(e){let n=wt.get(e);n?.disconnect();let r=z.get(e),o=0,i=5;r||(r=Ge(e),z.set(e,r));let{offsetWidth:l,offsetHeight:c}=le,u=[r.top-i,l-(r.left+i+r.width),c-(r.top+i+r.height),r.left-i].map(s=>`${-1*Math.floor(s)}px`).join(" "),a=new IntersectionObserver(()=>{++o>1&&ge(e)},{root:le,threshold:1,rootMargin:u});a.observe(e),wt.set(e,a)}function ge(e){clearTimeout(nt.get(e));let n=ot(e),r=De(n)?500:n.duration;nt.set(e,setTimeout(async()=>{let o=he.get(e);try{await o?.finished,z.set(e,Ge(e)),Mr(e)}catch{}},r))}function Lr(){clearTimeout(nt.get(le)),nt.set(le,setTimeout(()=>{Nn.forEach(e=>Bn(e,n=>Wn(()=>ge(n))))},100))}function jr(e){setTimeout(()=>{Pr.set(e,setInterval(()=>Wn(ge.bind(null,e)),2e3))},Math.round(2e3*Math.random()))}function Wn(e){typeof requestIdleCallback=="function"?requestIdleCallback(()=>e()):requestAnimationFrame(()=>e())}var It,Se,Yr=typeof window<"u"&&"ResizeObserver"in window;Yr&&(le=document.documentElement,It=new MutationObserver(Dr),Se=new ResizeObserver(Xr),window.addEventListener("scroll",()=>{At=window.scrollY,Ct=window.scrollX}),Se.observe(le));function Hr(e){return e.reduce((o,i)=>[...o,...Array.from(i.addedNodes),...Array.from(i.removedNodes)],[]).every(o=>o.nodeName==="#comment")?!1:e.reduce((o,i)=>{if(o===!1)return!1;if(i.target instanceof Element){if(xt(i.target),!o.has(i.target)){o.add(i.target);for(let l=0;l<i.target.children.length;l++){let c=i.target.children.item(l);if(c){if(Pe in c)return!1;xt(i.target,c),o.add(c)}}}if(i.removedNodes.length)for(let l=0;l<i.removedNodes.length;l++){let c=i.removedNodes[l];if(Pe in c)return!1;c instanceof Element&&(o.add(c),xt(i.target,c),Oe.set(c,[i.previousSibling,i.nextSibling]))}}return o},new Set)}function xt(e,n){!n&&!(te in e)?Object.defineProperty(e,te,{value:e}):n&&!(te in n)&&Object.defineProperty(n,te,{value:e})}function Fr(e){var n;let r=e.isConnected,o=z.has(e);r&&Oe.has(e)&&Oe.delete(e),he.has(e)&&((n=he.get(e))===null||n===void 0||n.cancel()),rt in e?Gn(e):o&&r?zr(e):o&&!r?Ur(e):Gn(e)}function Q(e){return Number(e.replace(/[^0-9.\-]/g,""))}function Vr(e){let n=e.parentElement;for(;n;){if(n.scrollLeft||n.scrollTop)return{x:n.scrollLeft,y:n.scrollTop};n=n.parentElement}return{x:0,y:0}}function Ge(e){let n=e.getBoundingClientRect(),{x:r,y:o}=Vr(e);return{top:n.top+o,left:n.left+r,width:n.width,height:n.height}}function kn(e,n,r){let o=n.width,i=n.height,l=r.width,c=r.height,t=getComputedStyle(e);if(t.getPropertyValue("box-sizing")==="content-box"){let a=Q(t.paddingTop)+Q(t.paddingBottom)+Q(t.borderTopWidth)+Q(t.borderBottomWidth),s=Q(t.paddingLeft)+Q(t.paddingRight)+Q(t.borderRightWidth)+Q(t.borderLeftWidth);o-=s,l-=s,i-=a,c-=a}return[o,l,i,c].map(Math.round)}function ot(e){return te in e&&Te.has(e[te])?Te.get(e[te]):{duration:250,easing:"ease-in-out"}}function Rn(e){if(te in e)return e[te]}function St(e){let n=Rn(e);return n?Be.has(n):!1}function Bn(e,...n){n.forEach(r=>r(e,Te.has(e)));for(let r=0;r<e.children.length;r++){let o=e.children.item(r);o&&n.forEach(i=>i(o,Te.has(o)))}}function Ot(e){return Array.isArray(e)?e:[e]}function De(e){return typeof e=="function"}function zr(e){let n=z.get(e),r=Ge(e);if(!St(e))return z.set(e,r);let o;if(!n)return;let i=ot(e);if(typeof i!="function"){let l=n.left-r.left,c=n.top-r.top,[t,u,a,s]=kn(e,n,r),d={transform:`translate(${l}px, ${c}px)`},f={transform:"translate(0, 0)"};t!==u&&(d.width=`${t}px`,f.width=`${u}px`),a!==s&&(d.height=`${a}px`,f.height=`${s}px`),o=e.animate([d,f],{duration:i.duration,easing:i.easing})}else{let[l]=Ot(i(e,"remain",n,r));o=new Animation(l),o.play()}he.set(e,o),z.set(e,r),o.addEventListener("finish",ge.bind(null,e))}function Gn(e){rt in e&&delete e[rt];let n=Ge(e);z.set(e,n);let r=ot(e);if(!St(e))return;let o;if(typeof r!="function")o=e.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:r.duration*1.5,easing:"ease-in"});else{let[i]=Ot(r(e,"add",n));o=new Animation(i),o.play()}he.set(e,o),o.addEventListener("finish",ge.bind(null,e))}function En(e,n){var r;e.remove(),z.delete(e),Oe.delete(e),he.delete(e),(r=wt.get(e))===null||r===void 0||r.disconnect(),setTimeout(()=>{if(Pe in e&&delete e[Pe],Object.defineProperty(e,rt,{value:!0,configurable:!0}),n&&e instanceof HTMLElement)for(let o in n)e.style[o]=""},0)}function Ur(e){var n;if(!Oe.has(e)||!z.has(e))return;let[r,o]=Oe.get(e);Object.defineProperty(e,Pe,{value:!0,configurable:!0});let i=window.scrollX,l=window.scrollY;if(o&&o.parentNode&&o.parentNode instanceof Element?o.parentNode.insertBefore(e,o):r&&r.parentNode?r.parentNode.appendChild(e):(n=Rn(e))===null||n===void 0||n.appendChild(e),!St(e))return En(e);let[c,t,u,a]=Jr(e),s=ot(e),d=z.get(e);(i!==Ct||l!==At)&&Zr(e,i,l,s);let f,h={position:"absolute",top:`${c}px`,left:`${t}px`,width:`${u}px`,height:`${a}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!De(s))Object.assign(e.style,h),f=e.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:s.duration,easing:"ease-out"});else{let[v,b]=Ot(s(e,"remove",d));b?.styleReset!==!1&&(h=b?.styleReset||h,Object.assign(e.style,h)),f=new Animation(v),f.play()}he.set(e,f),f.addEventListener("finish",En.bind(null,e,h))}function Zr(e,n,r,o){let i=Ct-n,l=At-r,c=document.documentElement.style.scrollBehavior;if(getComputedStyle(le).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+i,window.scrollY+l),!e.parentElement)return;let u=e.parentElement,a=u.clientHeight,s=u.clientWidth,d=performance.now();function f(){requestAnimationFrame(()=>{if(!De(o)){let h=a-u.clientHeight,v=s-u.clientWidth;d+o.duration>performance.now()?(window.scrollTo({left:window.scrollX-v,top:window.scrollY-h}),a=u.clientHeight,s=u.clientWidth,f()):document.documentElement.style.scrollBehavior=c}})}f()}function Jr(e){let n=z.get(e),[r,,o]=kn(e,n,Ge(e)),i=e.parentElement;for(;i&&(getComputedStyle(i).position==="static"||i instanceof HTMLBodyElement);)i=i.parentElement;i||(i=document.body);let l=getComputedStyle(i),c=z.get(i)||Ge(i),t=Math.round(n.top-c.top)-Q(l.borderTopWidth),u=Math.round(n.left-c.left)-Q(l.borderLeftWidth);return[t,u,r,o]}function Pn(e,n={}){return It&&Se&&(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!De(n)&&!n.disrespectUserMotionPreference||(Be.add(e),getComputedStyle(e).position==="static"&&Object.assign(e.style,{position:"relative"}),Bn(e,ge,jr,i=>Se?.observe(i)),De(n)?Te.set(e,n):Te.set(e,{duration:250,easing:"ease-in-out",...n}),It.observe(e,{childList:!0}),Nn.add(e))),Object.freeze({parent:e,enable:()=>{Be.add(e)},disable:()=>{Be.delete(e)},isEnabled:()=>Be.has(e)})}function Tt(e){let[n,r]=(0,me.useState)(),o=(0,me.useMemo)(()=>e,[]),i=(0,me.useCallback)(c=>{c instanceof HTMLElement?r(Pn(c,o)):r(void 0)},[o]),l=(0,me.useCallback)(c=>{n&&(c?n.enable():n.disable())},[n]);return[i,l]}var Xn=j(ht());function Kr(e,n,r){let o=n<0?e.length+n:n;if(o>=0&&o<e.length){let i=r<0?e.length+r:r,[l]=e.splice(n,1);e.splice(i,0,l)}}function Dn(e,n,r){return e=[...e],Kr(e,n,r),e}var it=j(Ne());var U={group:"mireo91-repeatablefields-xY17aG-group",noSelect:"mireo91-repeatablefields-xY17aG-noSelect",simpleButtons:"mireo91-repeatablefields-xY17aG-simpleButtons",buttons:"mireo91-repeatablefields-xY17aG-buttons",move:"mireo91-repeatablefields-xY17aG-move",property:"mireo91-repeatablefields-xY17aG-property",wrapper:"mireo91-repeatablefields-xY17aG-wrapper",simpleWrapper:"mireo91-repeatablefields-xY17aG-simpleWrapper",delete:"mireo91-repeatablefields-xY17aG-delete",simpleWrapperOneButton:"mireo91-repeatablefields-xY17aG-simpleWrapperOneButton",simpleWrapperTwoButtons:"mireo91-repeatablefields-xY17aG-simpleWrapperTwoButtons"};var Gt=wn(()=>K.default.createElement("span",{type:"button",className:U.move},K.default.createElement(Xn.Icon,{icon:"sort"}))),Mn={disrespectUserMotionPreferences:!0},_r=Tn(({value:e})=>K.default.createElement("div",null,e)),Qr=Sn(({children:e,automaticSorting:n,manualSort:r})=>{let[o,i]=Tt(Mn);return(0,K.useEffect)(()=>{document.body.style.cursor=r?"grabbing":null,i(!1);let l=setTimeout(()=>{i(!r)},500);return()=>clearTimeout(l)},[r]),K.default.createElement("div",{className:r&&U.noSelect,ref:n?o:null},e)});function Et({onChange:e,value:n,element:r,items:o,enable:i,automaticSorting:l,KEY_PROPERTY:c}){if(!i){let[s]=Tt(Mn);return K.default.createElement("div",{ref:l?s:null},o.map((d,f)=>K.default.createElement("div",{key:d[c]},r(f))))}let[t,u]=(0,K.useState)(!1);function a({oldIndex:s,newIndex:d}){e(Dn(n,s,d)),u(!1)}return K.default.createElement(Qr,{onSortStart:()=>u(!0),manualSort:t,onSortEnd:a,automaticSorting:l,useDragHandle:!0,axis:"y",lockAxis:"y"},o.map((s,d)=>K.default.createElement(_r,{key:s[c],index:d,value:r(d)})))}Et.propTypes={items:it.default.array.isRequired,onSortEndAction:it.default.func.isRequired,element:it.default.func.isRequired};var Ln=j(ie()),H=j(Ne()),jn=j(ze()),$r=window["@Neos:HostPluginAPI"]["@NeosProjectPackages"]().NeosUiEditors.EditorEnvelope;function Yn({commit:e,editorId:n,editorOptions:r,id:o,...i}){function l(c,t){let{property:u,hooksRegistry:a}=i;if(t){Object.keys(t).map(s=>{a.get(s)(c,t[s]).then(f=>{let h=omit(f,["__type"]);e(o,u,h)})});return}e(o,u,c)}return Ln.default.createElement($r,{...i,commit:l,options:r||{},id:`${n}-${o}`})}Yn.propTypes={identifier:H.default.string.isRequired,label:H.default.string.isRequired,options:H.default.object,value:H.default.any,renderSecondaryInspector:H.default.func,editor:H.default.string.isRequired,editorRegistry:H.default.object.isRequired,i18nRegistry:H.default.object.isRequired,validationErrors:H.default.array,onEnterKey:H.default.func,helpMessage:H.default.string,helpThumbnail:H.default.string,highlight:H.default.bool,property:H.default.string.isRequired,id:H.default.number.isRequired,commit:H.default.func.isRequired};var qr=(0,jn.neos)(e=>({hooksRegistry:e.get("inspector").get("saveHooks")})),Hn=qr(Yn);function Fn(e,n,r){return e=to(e),Nt(r,n,e)}var ye=e=>JSON.parse(JSON.stringify(e)),Wt=(e,n)=>JSON.stringify(e)==JSON.stringify(n);function at(e){return typeof e=="number"?!0:typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}function st(e){return e?typeof e=="string"?e.includes("ClientEval:"):Array.isArray(e)?e.some(n=>st(n)):Vn(e)?st(Object.values(e)):!1:!1}function lt(e,n,r,o,i){return typeof e=="string"?eo(e,n,r,o,i):Array.isArray(e)?e.map(l=>lt(l,n,r,o,i)):Vn(e)?Object.fromEntries(Object.entries(e).map(([l,c])=>[l,lt(c,n,r,o,i)])):e}function eo(e,n,r,o,i){if(typeof e=="string"&&e.startsWith("ItemEval:"))try{return new Function("item,node,parentNode,documentNode","return "+e.replace("ItemEval:",""))(n,r,o,i)}catch(l){return console.warn('An error occurred while trying to evaluate "'+e+`"
`,l),e}return e}function Vn(e){return e!=null&&(e.constructor===Object||!e.constructor&&typeof e=="object")}function zn(e,n){let r=ye(e);return!Array.isArray(r)||!r.length||!Array.isArray(n)||!n.length?r:r.sort((o,i)=>n.reduce((l,c)=>{if(l!==0)return l;let{property:t,order:u="asc"}=c,a=o[t],s=i[t],d=0;return at(a)&&at(s)?a>s?d=1:a<s&&(d=-1):d=a.localeCompare(s),u==="desc"&&(d*=-1),d},0))}function Xe(e,n){let r=ye(e);for(let o in n)o in n&&(n[o]instanceof Object&&r[o]instanceof Object?r[o]=Xe(r[o],n[o]):r[o]=n[o]);return r}function to(e){return Array.isArray(e)?e:typeof e=="number"?[e]:e.split(".").map(n=>{let r=parseInt(n);return!isNaN(r)&&String(r)===n?r:n})}function Nt(e,n,r){if(r.length===0)return n;if(typeof e>"u"&&(typeof r[0]=="number"?e=[]:e={}),Array.isArray(e)){typeof r[0]=="number"&&e.length<r[0]&&(r[0]=e.length);let o=[...e];return o[r[0]]=Nt(e[r[0]],n,r.slice(1)),o}return Object.assign({},e,{[r[0]]:Nt(e[r[0]],n,r.slice(1))})}var Me="_UUID_",no=e=>({contextNodePath:e.focusedNodePath,dataSourceIdentifier:e.options.dataSourceIdentifier,dataSourceUri:e.options.dataSourceUri,dataSourceAdditionalData:e.options.dataSourceAdditionalData,dataSourceDisableCaching:!!e.options.dataSourceDisableCaching});function Jn({commit:e,dataSourcesDataLoader:n,editorRegistry:r,i18nRegistry:o,id:i,validatorRegistry:l,value:c,renderHelpIcon:t,identifier:u,...a}){let{dataSourceIdentifier:s,dataSourceUri:d,dataSourceAdditionalData:f}=a.options,h=!!(s||d),v=o.translate(a.label),[b,R]=(0,G.useState)(!0),[m,S]=(0,G.useState)({}),[w,I]=(0,G.useState)(!0),[A,L]=(0,G.useState)(!0),[p,E]=(0,G.useState)([]),[C,P]=(0,G.useState)(h?null:a.options),[k,Z]=(0,G.useState)({}),[F,ce]=(0,G.useState)({}),be=()=>JSON.stringify(p),[je,Ye]=(0,G.useState)([]);(0,G.useEffect)(()=>{R(!0),_t.get().endpoints.dataSource("get-property-types",null,{}).then(g=>{S(g),R(!1)})},[]),(0,G.useEffect)(()=>{let g=be();if(!(je===g||!C)&&(Ye(g),_n(p),Qn(p),C.sortBy)){let y=setTimeout(()=>{let B=zn(p,C.sortBy);Ee(B)},2e3);return()=>clearTimeout(y)}},[p]),(0,G.useEffect)(()=>{if(!C||st(C))return;let g=ft();Z(g),ue(g)},[C,m]);let ct=()=>JSON.stringify({dataSourceIdentifier:s,dataSourceUri:d,dataSourceAdditionalData:f}),[ut,dt]=(0,G.useState)(null);(0,G.useEffect)(()=>{if(!h)return;let g=ct();ut!==g&&(R(!0),dt(g),n.resolveValue(no(a),p).then(y=>{P(Xe(a.options,y)),R(!1)}))},[s,d,f]);function ft(){let g={},y=C.properties;if(y){let B=[];for(let X in y){let D=y[X];B.push({key:X,position:D?.position??null,item:D})}pt(B).forEach(({key:X,item:D})=>{let N=D&&D.defaultValue;g[X]=He(N,"")})}return g}function ue(g){let y=c?ye(c):[];y=y.map(N=>N[Me]?N:{...N,[Me]:Ft()});let{min:B,max:X}=C;if(B&&y.length<B)for(var D=0;D<B;++D)y[D]?y[D]=c[D]:y[D]=g;if(X&&y.length>X&&(y=y.slice(0,X)),y.length)for(let N=0;N<y.length;N++){let J=C.predefinedProperties?.[N]?.properties,M=ye(y[N]),de=Object.keys(M).filter($=>$==Me||$ in g).reduce(($,Fe)=>{let Ve=J?.[Fe]?.defaultValue!=null?J[Fe].defaultValue:M[Fe];return at(Ve)&&(Ve=parseFloat(Ve)),{...$,[Fe]:Ve}},{});y[N]=de}E(y)}function Ee(g){if(Wt(g,p))return;let y=ye(g).map(B=>(delete B[Me],B));Wt(y,c)||e(y),E(g)}function _n(g){C&&C.max&&I(C.max>g.length)}function Qn(g){C&&C.min&&L(C.min<g.length)}function $n(){Ee([...p,k])}function kt(g){let y=p.filter((B,X)=>g!==X);Ee(y)}handleCollapse=g=>{let y=!F[g];ce({...F,[g]:y})};function qn(g,y,B){Ee(Fn(y,B,p))}function er(g,y,B,X){if(!y||!y.validation)return;let D=y.validation,J=Object.keys(D).map(M=>{let re=D[M];return tr(g,M,re)}).filter(M=>M);if(C.controls&&C.controls.add){let M=C?.max?C.max>p.length:!0;I(M&&J.length<=0)}return J}function tr(g,y,B){let X=l.get(y);if(X)return X(g,B);console.warn(`Validator ${y} not found`)}function nr(g){let y=!!C.predefinedProperties&&C.predefinedProperties[g],{controls:B,sortBy:X,properties:D}=C,N=!y&&B.remove&&A,J=!y&&B.move&&p.length>1,M=N&&J,re=N||J;if(Object.keys(D).length===1)return G.default.createElement("div",{className:zt(U.simpleWrapper,M?U.simpleWrapperTwoButtons:re&&U.simpleWrapperOneButton)},Rt(g),re&&G.default.createElement("div",{class:U.simpleButtons},N&&G.default.createElement(ne.IconButton,{onClick:()=>kt(g),className:U.delete,icon:"trash"}),J&&G.default.createElement(Gt,null)));let $=!!B.collapse;return G.default.createElement("div",{className:U.wrapper},!!(re||$)&&G.default.createElement("div",{class:U.buttons},J&&G.default.createElement(Gt,null),$&&G.default.createElement(ne.IconButton,{onClick:()=>handleCollapse(g),icon:F[g]?"chevron-down":"chevron-up"}),N&&G.default.createElement(ne.IconButton,{onClick:()=>kt(g),className:U.delete,icon:"trash"})),!F[g]&&Rt(g))}function Rt(g){let{predefinedProperties:y}=C,B=y&&y[g]?y[g].label:null,X=[];return Object.keys(k).map(D=>{X.push(rr(D,g))}),X=X.filter(Boolean),X.length===0?null:G.default.createElement("div",{className:U.group},B&&G.default.createElement("span",{dangerouslySetInnerHTML:{__html:B}}),X)}function Bt(g){return g!=null}function He(g,y=""){return Bt(g)?g:y}function rr(g,y){let B=ye(p),{properties:X,predefinedProperties:D}=C,N=lt(X[g],B[y],a.node,a.parentNode,a.documentNode);D&&D[y]&&D[y].properties&&D[y].properties[g]&&(N=Xe(N,D[y].properties[g]));let J=N.type?m[N.type]:{};J&&(N=Xe(J,N));let M=He(N.editorOptions,{}),re=He(N.editor,"Neos.Neos/Inspector/Editors/TextFieldEditor"),de=He(B[y][g]);!de&&Bt(N.defaultValue)&&(de=N.defaultValue),(M.hasOwnProperty("dataSourceUri")||M.hasOwnProperty("dataSourceIdentifier"))&&(M={...M},M.dataSourceAdditionalData?(M.dataSourceAdditionalData.hasOwnProperty("repeatableIndex")&&(M.dataSourceAdditionalData.repeatableIndex=y),M.dataSourceAdditionalData.hasOwnProperty("repeatableValue")&&(M.dataSourceAdditionalData.repeatableValue=p)):M.dataSourceAdditionalData={});let $=Object.keys(X).length<=1;return G.default.createElement("div",{className:!$&&U.property,hidden:N.hidden},G.default.createElement(Hn,{identifier:`${u}-repeatable-${y}-${g}`,options:M,value:de,renderSecondaryInspector:a.renderSecondaryInspector,editor:re,editorRegistry:r,i18nRegistry:o,validationErrors:er(de,N,y,g),highlight:!1,property:`${y}.${g}`,id:`repeatable-${y}-${g}`,editorId:i,commit:qn,...N}))}if(b||!C)return G.default.createElement(G.default.Fragment,null,!!v&&G.default.createElement(ne.Label,{htmlFor:i},v," ",t()),G.default.createElement(en,{id:i,isLoading:b,heightMultiplier:2}));if(C.hidden)return null;let{buttonAddLabel:or="Mireo.RepeatableFields:Main:addRow"}=C;return G.default.createElement(G.default.Fragment,null,!!v&&G.default.createElement(ne.Label,{htmlFor:i},v," ",t()),G.default.createElement(Et,{element:nr,items:p,onChange:Ee,enable:C.controls?.move,automaticSorting:C.sortBy,value:p,KEY_PROPERTY:Me}),C.controls.add&&w&&G.default.createElement(G.default.Fragment,null,G.default.createElement(ne.Button,{onClick:$n,id:i},o.translate(or)),!!v||t()))}Jn.propTypes={identifier:T.default.string.isRequired,label:T.default.string.isRequired,value:T.default.arrayOf(T.default.object),renderSecondaryInspector:T.default.func,editor:T.default.string.isRequired,editorRegistry:T.default.object.isRequired,i18nRegistry:T.default.object.isRequired,validationErrors:T.default.array,onEnterKey:T.default.func,helpMessage:T.default.string,helpThumbnail:T.default.string,highlight:T.default.bool,commit:T.default.func.isRequired,options:T.default.shape({hidden:T.default.bool,buttonAddLabel:T.default.string,dataSourceIdentifier:T.default.string,dataSourceUri:T.default.string,dataSourceDisableCaching:T.default.bool,dataSourceAdditionalData:T.default.objectOf(T.default.any),predefinedProperties:T.default.arrayOf(T.default.shape({label:T.default.string,value:T.default.object})),max:T.default.number,min:T.default.number,controls:T.default.shape({move:T.default.bool,remove:T.default.bool,add:T.default.bool,collapse:T.default.bool}),sortBy:T.default.arrayOf(T.default.shape({property:T.default.string,direction:T.default.oneOf(["asc","desc"])}))}).isRequired,dataSourcesDataLoader:T.default.shape({resolveValue:T.default.func.isRequired}).isRequired,focusedNodePath:T.default.string.isRequired};var ro=(0,Zn.neos)(e=>({editorRegistry:e.get("inspector").get("editors"),i18nRegistry:e.get("i18n"),dataSourcesDataLoader:e.get("dataLoaders").get("DataSources")})),oo=(0,Un.connect)(e=>({focusedNodePath:Le.selectors.CR.Nodes.focusedNodePathSelector(e),node:Le.selectors.CR.Nodes.focusedSelector(e),parentNode:Le.selectors.CR.Nodes.focusedParentSelector(e),documentNode:Le.selectors.CR.Nodes.documentNodeSelector(e)})),Kn=ro(oo(Jn));Xt("Mireo.RepeatableFields:RepeatableField",{},e=>{e.get("inspector").get("editors").set("Mireo.RepeatableFields/Inspector/Editors/RepeatableFieldEditor",{component:Kn,hasOwnLabel:!0})});})();
//# sourceMappingURL=Plugin.js.map
